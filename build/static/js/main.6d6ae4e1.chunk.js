(this.webpackJsonpproduce404=this.webpackJsonpproduce404||[]).push([[0],{12:function(e,t,n){},19:function(e,t,n){},23:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),o=n(24),r=n.n(o),c=n(3),i=n(4),l=n(5),d=n(6),u=(n(31),n(2)),m=(n(32),n.p+"static/media/logo_horizontal.7d7483dd.png"),j=n(0),h=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={username:""},s}return Object(i.a)(n,[{key:"logOut",value:function(){sessionStorage.getItem("login")?(sessionStorage.removeItem("login"),alert("You have been logged out."),window.location.replace("/")):alert("You are not logged in!")}},{key:"componentDidMount",value:function(){sessionStorage.getItem("login")?(this.setState({username:sessionStorage.getItem("login")}),document.getElementById("logout").style.display="inline-block",document.getElementById("login").style.display="none"):(document.getElementById("logout").style.display="none",document.getElementById("login").style.display="inline-block")}},{key:"render",value:function(){return Object(j.jsxs)("nav",{className:"Navbar",children:[Object(j.jsx)("li",{className:"title",children:Object(j.jsx)(u.b,{className:"titleLink",to:"/",children:Object(j.jsx)("img",{src:m,height:"40px",alt:"Produce 404"})})}),Object(j.jsxs)("ul",{className:"NavbarItems",children:[Object(j.jsx)("li",{className:"navitem",children:Object(j.jsx)(u.b,{to:"/mygroup",children:"My Group"})}),Object(j.jsx)("li",{className:"navitem",children:Object(j.jsx)(u.b,{to:"/groups/",children:"Idols"})}),Object(j.jsx)("li",{className:"navitem",children:Object(j.jsx)(u.b,{to:"/profile",children:"Profiles"})}),Object(j.jsx)("li",{className:"navitem",children:Object(j.jsx)(u.b,{to:"/leaderboard",children:"Leaderboard"})}),Object(j.jsx)("li",{className:"navitem",id:"logout",children:Object(j.jsxs)("a",{onClick:this.logOut,children:["Log Out (",this.state.username,")"]})}),Object(j.jsx)("li",{className:"navitem",id:"login",children:Object(j.jsx)(u.b,{to:"/login",children:"Log In"})})]})]})}}]),n}(a.a.Component),p=(n(12),n.p+"static/media/logo_full.44e49067.png"),b=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"Main",children:[Object(j.jsx)("img",{className:"logoFull",src:p,height:"100px"}),Object(j.jsx)("iframe",{className:"ytplayer",id:"LBytplayer",type:"text/html",width:"720",height:"405",src:"https://www.youtube.com/embed/M3rg-rh6MPo?autoplay=1&modestbranding=1&color=white",frameBorder:"0",allowFullScreen:!0}),Object(j.jsx)("h1",{className:"idolName",children:"Build your group!"}),Object(j.jsxs)("div",{className:"homepageText",children:[Object(j.jsx)("p",{children:"Stop arguing with people online. Simply prove you're objectively better at being a K-pop fan by beating them at this game."}),Object(j.jsxs)("ol",{id:"homepageList",children:[Object(j.jsx)("li",{className:"homepageListItem",children:"Select your favourite idols"}),Object(j.jsx)("li",{className:"homepageListItem",children:"Choose a song to cover"}),Object(j.jsx)("li",{className:"homepageListItem",children:Object(j.jsx)(u.b,{to:"/mygroup",className:"slink",children:"Perform!"})})]}),Object(j.jsx)("p",{children:"The #1 song on the leaderboard gets automatic YouTube Player privileges!"}),Object(j.jsx)("p",{children:"And bragging rights, I guess, if you think that would be an accomplishment worth bragging about."})]})]})}}]),n}(a.a.Component),g=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).usernameChange=function(e){s.setState({username:e.target.value})},s.passwordChange=function(e){s.setState({password:e.target.value})},s.login=function(e){if(e.preventDefault(),""!==s.state.username&&""!==s.state.password){var t={username:s.state.username,password:s.state.password};fetch("/api/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e[0]?(alert("Login successful."),sessionStorage.setItem("login",s.state.username),window.location.replace("/home")):alert("Login failed. Please try again.")}))}else alert("Please enter a username and password.")},s.registerPage=function(e){e.preventDefault(),window.location.replace("/register")},s.state={username:"",password:""},s}return Object(i.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"Main",children:[Object(j.jsx)("h1",{className:"idolName",children:"Login"}),Object(j.jsx)("form",{onSubmit:this.login,children:Object(j.jsx)("table",{className:"memberTable",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:Object(j.jsx)("label",{htmlFor:"username",children:"Username"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{id:"username",autoComplete:"username",value:this.state.username,onChange:this.usernameChange})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:Object(j.jsx)("label",{htmlFor:"password",children:"Password"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{id:"password",type:"password",autoComplete:"current-password",value:this.state.password,onChange:this.passwordChange})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{id:"submit",type:"submit",value:"Login"})})]})]})})}),Object(j.jsxs)("p",{id:"bottomButtons",children:["Don't have an account? Click ",Object(j.jsx)(u.b,{className:"splink",to:"/register",children:"here"})," to register."]})]})}}]),n}(a.a.Component),O=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).usernameChange=function(e){s.setState({username:e.target.value})},s.passwordChange=function(e){s.setState({password:e.target.value})},s.register=function(e){if(e.preventDefault(),""!==s.state.username&&""!==s.state.password){var t={username:s.state.username,password:s.state.password};fetch("/api/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e[0]?(alert("Registration successful! Please log in."),window.location.replace("/login")):alert("Username is already taken.")}))}else alert("Please enter a username and password.")},s.state={username:"",password:""},s}return Object(i.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"Main",children:[Object(j.jsx)("h1",{className:"idolName",children:"Register"}),Object(j.jsx)("form",{onSubmit:this.register,children:Object(j.jsx)("table",{className:"memberTable",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:Object(j.jsx)("label",{htmlFor:"username",children:"Username"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{id:"username",autoComplete:"username",value:this.state.username,onChange:this.usernameChange})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:Object(j.jsx)("label",{htmlFor:"password",children:"Password"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{id:"password",type:"password",autoComplete:"current-password",value:this.state.password,onChange:this.passwordChange})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{id:"submit",type:"submit",value:"Register"})})]})]})})})]})}}]),n}(a.a.Component),x=(n(23),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={groups:[]},s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/groups/all").then((function(e){return e.json()})).then((function(t){e.setState({groups:t.map((function(e){return e.group_name}))})}))}},{key:"render",value:function(){return Object(j.jsxs)("ul",{className:"sidebar",children:[Object(j.jsx)("li",{className:"sidebarli",children:Object(j.jsx)("h2",{children:"Idols"})}),this.state.groups.map((function(e){return Object(j.jsx)("li",{className:"sidebarli",children:Object(j.jsx)(u.b,{to:"/groups/"+e,children:e})},e)}))]})}}]),n}(a.a.Component)),f=(n(19),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).fetchGroup=function(){var e=s.props.match.params.group_name;fetch("/api/groups/"+e).then((function(e){return e.json()})).then((function(e){s.setState({group_name:e[0].group_name,company:e[0].company}),s.fetchSongOptions()})),fetch("/api/groups/"+e+"/members").then((function(e){return e.json()})).then((function(e){s.setState({members:e.map((function(e){return e.stage_name}))}),console.log(s.state.members)}))},s.fetchSongOptions=function(){""!==s.state.group_name&&fetch("/api/tracks/"+s.state.group_name).then((function(e){return e.json()})).then((function(e){s.setState({song_options:e})}))},s.printSongOptions=function(){if(s.state.song_options.length>0)return s.state.song_options.map((function(e){return Object(j.jsx)("li",{className:"songOption",children:Object(j.jsxs)("button",{disabled:!0,type:"button",className:"songOptionPreviewButton",children:[Object(j.jsx)("img",{className:"songOptionImg",src:e.imageurl,alt:e.album}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"songOptionImg",id:"songOptionLabel",children:e.name})]})},e.id)}))},s.isSoloist=function(){return s.state.group.includes("(Soloist)")},s.state={group_name:"",company:"",members:[],song_options:[]},s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.isSoloist&&(document.getElementById("membersList").style.columns="1"),this.fetchGroup()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.group_name!==e.match.params.group_name&&this.fetchGroup()}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"Content",children:[Object(j.jsx)(x,{}),Object(j.jsxs)("div",{id:"groupInfo",children:[Object(j.jsx)("h1",{className:"idolName",children:this.state.group_name}),Object(j.jsx)("h3",{className:"company",children:this.state.company})]}),Object(j.jsx)("hr",{}),Object(j.jsx)("ul",{className:"membersList",id:"membersList",children:this.state.members.map((function(t){return Object(j.jsx)("li",{className:"memberli",children:Object(j.jsx)(u.b,{to:"/groups/"+e.state.group_name+"/members/"+t,children:t})},t)}))}),Object(j.jsx)("hr",{}),Object(j.jsxs)("div",{id:"songOptionsPreview",children:[Object(j.jsx)("h3",{className:"company",children:"Songs"}),Object(j.jsx)("ul",{className:"songOptionsList",children:this.printSongOptions()})]})]})}}]),n}(a.a.Component)),y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).fetchMemberInfo=function(){var e=s.props.match.params.group,t=s.props.match.params.member;fetch("/api/groups/"+e+"/members/"+t).then((function(e){return e.json()})).then((function(e){s.setState({member_id:e[0].member_id,group:e[0].group,stage_name:e[0].stage_name,last_name:e[0].last_name,first_name:e[0].first_name,year:e[0].year,nationality:e[0].nationality,sing:e[0].sing,rap:e[0].rap,dance:e[0].dance})}))},s.isSoloist=function(){return s.state.group.includes("(Soloist)")},s.addMember=function(e){if(e.preventDefault(),sessionStorage.getItem("login")){var t={username:sessionStorage.getItem("login"),member:s.state.member_id};fetch("/api/add",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log("data",e),e[0]?(alert(t.member+" added to "+t.username+"'s group."),window.location.replace("/groups/"+s.state.group)):alert("Member already in "+t.username+"'s group!")}))}else alert("You must be logged in to perform this action."),window.location.replace("/login")},s.state={member_id:"",group:"",stage_name:"",last_name:"",first_name:"",year:0,nationality:"",sing:0,rap:0,dance:0},s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.fetchMemberInfo()}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"Content",children:[Object(j.jsx)(x,{}),Object(j.jsxs)("h1",{className:"idolName",children:[this.state.stage_name," ",this.isSoloist()?"(Soloist)":"("+this.state.group+")"]}),Object(j.jsx)("table",{className:"memberTable",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"meminfo",children:"Full Name"}),Object(j.jsxs)("td",{children:[this.state.first_name," ",this.state.last_name]})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"meminfo",children:"Birth Year"}),Object(j.jsx)("td",{children:this.state.year})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"meminfo",children:"Korean Age"}),Object(j.jsx)("td",{children:(new Date).getFullYear()-this.state.year+1})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"meminfo",children:"Nationality"}),Object(j.jsx)("td",{children:this.state.nationality})]})]})}),Object(j.jsxs)("p",{id:"bottomButtons",children:[Object(j.jsx)("button",{onClick:this.addMember,children:"Add to group"}),Object(j.jsx)("br",{}),Object(j.jsxs)("small",{children:["(ID: ",this.state.member_id,")"]})]})]})}}]),n}(a.a.Component),v=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"Content",children:[Object(j.jsx)(x,{}),Object(j.jsx)("img",{className:"logoFull",src:p}),Object(j.jsx)("h1",{className:"idolName",id:"searchText",children:"Select an artist from the sidebar!"})]})}}]),n}(a.a.Component),N=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={users:[]},s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/userlist").then((function(e){return e.json()})).then((function(t){e.setState({users:t.map((function(e){return e.username}))})}))}},{key:"render",value:function(){return Object(j.jsxs)("ul",{className:"sidebar",children:[Object(j.jsx)("li",{className:"sidebarli",children:Object(j.jsx)("h2",{children:"Users"})}),this.state.users.map((function(e){return Object(j.jsx)("li",{className:"sidebarli",children:Object(j.jsx)(u.b,{to:"/profile/"+e,children:e})},e)}))]})}}]),n}(a.a.Component),S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).fetchProfile=function(){var e=s.props.match.params.username;sessionStorage.getItem("login")!==e?(document.getElementById("edit").style.display="none",document.getElementById("deleteAcc").style.display="none"):(document.getElementById("edit").style.display="block",document.getElementById("deleteAcc").style.display="block"),fetch("/api/profile/"+e).then((function(e){return e.json()})).then((function(e){e[0]?s.setState({username:e[0].username,group_name:e[0].group_name,name:e[0].name,location:e[0].location,bio:e[0].bio}):s.setState({username:"User Not Found"})}))},s.deleteAccount=function(){var e={username:s.state.username};window.confirm("Are you sure you want to delete account "+e.username+"?")&&fetch("/api/deleteaccount",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log("data",e),e?(alert("You have deleted your account."),sessionStorage.removeItem("login"),window.location.replace("/")):alert("An error occurred.")}))},s.state={username:"",group_name:"",name:"",location:"",bio:""},s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.fetchProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.username!==e.match.params.username&&this.fetchProfile()}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"Content",children:[Object(j.jsx)(N,{}),Object(j.jsx)("h1",{className:"idolName",children:this.state.username}),Object(j.jsx)("table",{className:"memberTable",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Group"}),Object(j.jsx)("td",{children:Object(j.jsx)(u.b,{to:"/"+this.state.username+"/mygroup",children:this.state.group_name})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Name"}),Object(j.jsx)("td",{children:this.state.name})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Location"}),Object(j.jsx)("td",{children:this.state.location})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Bio"}),Object(j.jsx)("td",{children:this.state.bio})]})]})}),Object(j.jsxs)("p",{id:"bottomButtons",children:[Object(j.jsx)(u.b,{id:"edit",className:"splink",to:"/edit",children:"Edit Profile"}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{id:"deleteAcc",onClick:this.deleteAccount,children:"Delete Account"})]})]})}}]),n}(a.a.Component),_=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).fetchProfile=function(){sessionStorage.getItem("login")?fetch("/api/profile/"+sessionStorage.getItem("login")).then((function(e){return e.json()})).then((function(e){e[0]?s.setState({username:e[0].username,group_name:e[0].group_name,name:e[0].name,location:e[0].location,bio:e[0].bio}):(alert("An error has occurred."),window.location.replace("/"))})):(alert("Please log in."),window.location.replace("/"))},s.groupNameChange=function(e){s.setState({group_name:e.target.value})},s.nameChange=function(e){s.setState({name:e.target.value})},s.locationChange=function(e){s.setState({location:e.target.value})},s.bioChange=function(e){s.setState({bio:e.target.value})},s.submitChanges=function(e){if(e.preventDefault(),""!==s.state.group_name&&""!==s.state.name&&""!==s.state.location&&""!==s.state.bio){var t={username:s.state.username,group_name:s.state.group_name,name:s.state.name,location:s.state.location,bio:s.state.bio};fetch("/api/edit",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log("data: "+e),1===e.result.ok?(alert("Profile updated."),window.location.replace("/profile")):alert("An error occurred.")}))}else alert("All fields require a value.")},s.state={username:"",group_name:"",name:"",location:"",bio:""},s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.fetchProfile()}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"Main",children:[Object(j.jsx)("h1",{className:"idolName",children:this.state.username}),Object(j.jsx)("form",{onSubmit:this.submitChanges,children:Object(j.jsx)("table",{className:"memberTable",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Group Name"}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{id:"groupName",autoComplete:"name",value:this.state.group_name,onChange:this.groupNameChange})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Name"}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{id:"name",autoComplete:"name",value:this.state.name,onChange:this.nameChange})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Location"}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{id:"location",autoComplete:"country",value:this.state.location,onChange:this.locationChange})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Bio"}),Object(j.jsx)("td",{children:Object(j.jsx)("textarea",{id:"bio",value:this.state.bio,onChange:this.bioChange})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{}),Object(j.jsx)("td",{id:"editInput",children:Object(j.jsx)("input",{id:"editInputButton",type:"submit",value:"Submit changes"})})]})]})})}),Object(j.jsx)("br",{})]})}}]),n}(a.a.Component),w=n(14),k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).loggedIn=function(){return sessionStorage.getItem("login")===s.state.username},s.userButtons=function(){s.loggedIn()&&s.state.members.length>0?document.getElementById("actions").style.display="block":document.getElementById("actions").style.display="none"},s.fetchMyGroup=function(){var e=s.props.match.params.username;fetch("/api/profile/"+e).then((function(e){return e.json()})).then((function(t){t[0]?s.setState({group_name:t[0].group_name}):s.setState({group_name:e+"'s Group"})})),s.setState({username:e}),fetch("/api/"+e+"/mygroup").then((function(e){return e.json()})).then((function(e){s.setState({members:e}),s.calcAverages(),s.userButtons()}))},s.calcAverages=function(){for(var e,t=s.state.members.length,n=0,a=0,o=0,r=0;r<t;r++)n+=(e=s.state.members[r]).sing,a+=e.rap,o+=e.dance;var c=s.roundToTwo(n/t),i=s.roundToTwo(a/t),l=s.roundToTwo(o/t);s.setState({singavg:c,rapavg:i,danceavg:l})},s.removeMember=function(e){if(sessionStorage.getItem("login")){var t={username:sessionStorage.getItem("login"),member:e};fetch("/api/remove",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e[0]?(alert(t.member+" removed from "+t.username+"'s group."),window.location.reload()):alert("An error occurred.")}))}else alert("An error occurred.")},s.printHeader=function(){return s.loggedIn()?Object(j.jsxs)("tr",{className:"mgRowHeader",children:[Object(j.jsx)("th",{className:"mgHeader1",children:"Member"}),Object(j.jsx)("th",{className:"mgHeader",children:"Original Group"}),Object(j.jsx)("th",{className:"mgHeader",children:"Singing"}),Object(j.jsx)("th",{className:"mgHeader",children:"Rapping"}),Object(j.jsx)("th",{className:"mgHeader",children:"Dancing"}),Object(j.jsx)("th",{className:"mgHeader2"})]}):Object(j.jsxs)("tr",{className:"mgRowHeader",children:[Object(j.jsx)("th",{className:"mgHeader1",children:"Member"}),Object(j.jsx)("th",{className:"mgHeader",children:"Original Group"}),Object(j.jsx)("th",{className:"mgHeader",children:"Singing"}),Object(j.jsx)("th",{className:"mgHeader",children:"Rapping"}),Object(j.jsx)("th",{className:"mgHeader2",children:"Dancing"})]})},s.printMembersList=function(){return s.loggedIn()?(console.log(s.state.members),s.state.members.map((function(e){return Object(j.jsxs)("tr",{className:"mgrow",children:[Object(j.jsx)("td",{className:"mginfo1",children:Object(j.jsx)(u.b,{to:"/groups/"+e.group+"/members/"+e.stage_name,children:e.stage_name})}),Object(j.jsx)("td",{className:"mginfo",children:Object(j.jsx)(u.b,{to:"/groups/"+e.group,children:e.group})}),Object(j.jsx)("td",{className:"mginfo",children:e.sing}),Object(j.jsx)("td",{className:"mginfo",children:e.rap}),Object(j.jsx)("td",{className:"mginfo",children:e.dance}),Object(j.jsx)("td",{className:"mginfo2",children:Object(j.jsx)("button",{onClick:s.removeMember.bind(Object(w.a)(s),e.member_id),children:"Remove"})})]},e.stage_name)}))):s.state.members.map((function(e){return Object(j.jsxs)("tr",{className:"mgrow",children:[Object(j.jsx)("td",{className:"mginfo1",children:Object(j.jsx)(u.b,{to:"/groups/"+e.group+"/members/"+e.stage_name,children:e.stage_name})}),Object(j.jsx)("td",{className:"mginfo",children:Object(j.jsx)(u.b,{to:"/groups/"+e.group,children:e.group})}),Object(j.jsx)("td",{className:"mginfo",children:e.sing}),Object(j.jsx)("td",{className:"mginfo",children:e.rap}),Object(j.jsx)("td",{className:"mginfo2",children:e.dance})]},e.stage_name)}))},s.state={username:"",members:[],group_name:"",singavg:0,rapavg:0,danceavg:0},s}return Object(i.a)(n,[{key:"roundToTwo",value:function(e){return+(Math.round(e+"e+2")+"e-2")}},{key:"componentDidMount",value:function(){this.fetchMyGroup()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.username!==e.match.params.username&&this.fetchMyGroup()}},{key:"render",value:function(){var e={pathname:"/perform",state:this.state};return Object(j.jsxs)("div",{className:"Main",children:[Object(j.jsxs)("div",{className:"mygroupDetails",children:[Object(j.jsx)("h1",{id:"groupName",children:this.state.group_name}),Object(j.jsxs)("h3",{children:[this.state.username," Entertainment"]}),this.state.members.length," members"]}),Object(j.jsx)("hr",{}),Object(j.jsxs)("div",{className:"mgstats",children:["Singing: ",this.state.singavg," | Rapping: ",this.state.rapavg," | Dancing: ",this.state.danceavg,Object(j.jsxs)("p",{id:"actions",children:[Object(j.jsx)(u.b,{id:"perflink",className:"perflink",to:e,children:">> Perform <<"}),Object(j.jsx)("br",{}),Object(j.jsx)("small",{children:Object(j.jsx)(u.b,{id:"namelink",className:"splink",to:"/edit",children:"Change group name"})})]})]}),Object(j.jsx)("hr",{}),Object(j.jsx)("table",{className:"mygroupTable",children:Object(j.jsxs)("tbody",{children:[this.printHeader(),this.printMembersList()]})})]})}}]),n}(a.a.Component),I=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).fetchSongOptions=function(){""!==s.props.selected_group&&(console.log("fetched",s.props.selected_group),fetch("/api/tracks/"+s.props.selected_group).then((function(e){return e.json()})).then((function(e){s.setState({song_options:e})})))},s.printSongOptions=function(){if(s.state.song_options.length>0)return document.getElementById("songOptionsListLabel").style.display="block",s.state.song_options.map((function(e){return Object(j.jsx)("li",{className:"songOption",children:Object(j.jsxs)("button",{type:"button",id:e.id,className:"songOptionButton",onClick:s.songSelected.bind(Object(w.a)(s),e.id,e.name),children:[Object(j.jsx)("img",{className:"songOptionImg",src:e.imageurl,alt:e.album}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"songOptionImg",id:"songOptionLabel",children:e.name})]})},e.id)}))},s.songSelected=function(e,t){document.getElementById(s.state.selected_track)&&(document.getElementById(s.state.selected_track).style.borderWidth="medium",document.getElementById(s.state.selected_track).style.borderColor="pink"),document.getElementById("final").style.display="block",s.setState({selected_track:e}),s.setState({selected_name:t}),document.getElementById(e).style.borderWidth="thick",document.getElementById(e).style.borderColor="black"},s.state={username:"",song_options:[],selected_track:"",selected_name:""},s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({username:sessionStorage.getItem("login")}),this.fetchSongOptions(),document.getElementById("songOptionsListLabel").style.display="none",document.getElementById("final").style.display="none"}},{key:"componentDidUpdate",value:function(e){this.props.selected_group!==e.selected_group&&this.fetchSongOptions()}},{key:"render",value:function(){var e={pathname:"/perform/go",state:{username:this.state.username,group_name:this.props.group_name,members:this.props.members,singavg:this.props.singavg,rapavg:this.props.rapavg,danceavg:this.props.danceavg,selected_group:this.props.selected_group,selected_track:this.state.selected_name,track_id:this.state.selected_track}};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{id:"songOptions",className:"songOptions",children:[Object(j.jsx)("label",{id:"songOptionsListLabel",htmlFor:"songOptionsList",children:"Choose a song:"}),Object(j.jsx)("ul",{className:"songOptionsList",children:this.printSongOptions()})]}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{id:"final",children:Object(j.jsxs)("p",{id:"perfAnnouncement",children:[this.state.username,"'s group ",this.props.group_name," will be performing ",this.props.selected_group,"'s ",this.state.selected_name,"!",Object(j.jsx)("br",{}),Object(j.jsx)(u.b,{to:e,children:Object(j.jsx)("button",{type:"button",id:"goButton",children:"Let's do it!"})})]})})]})}}]),n}(a.a.Component),C=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).getGroupOptions=function(){var e=[""];s.props.location.state.members.forEach((function(t){e.includes(t.group)||e.push(t.group)})),s.setState({groups:e})},s.htmlGroupOptions=function(){var e=[];return s.state.groups.forEach((function(t){e.push(Object(j.jsx)("option",{name:t,children:t},t))})),e},s.fetchSongOptions=function(){""!==s.state.selected_group&&(console.log("fetched",s.state.selected_group),fetch("/api/tracks/"+s.state.selected_group).then((function(e){return e.json()})).then((function(e){s.setState({song_options:e})})))},s.printSongOptions=function(){if(s.state.song_options.length>0)return console.log("please print",s.state.song_options),s.state.song_options.map((function(e){return Object(j.jsx)("li",{children:e.name},e.id)}))},s.groupSelected=function(e){s.setState({selected_group:e.target.value})},s.state={groups:[],selected_group:"",track_id:""},s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){sessionStorage.getItem("login")&&this.props.location.state?this.getGroupOptions():(alert('You must access this page from "My Group".'),window.location.replace("/"))}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"Main",children:[Object(j.jsx)("h1",{id:"perfSetup",children:"Set up your performance!"}),Object(j.jsxs)("div",{id:"groupOptions",className:"groupOptions",children:[Object(j.jsx)("label",{htmlFor:"groupOptionsDropdown",children:"Choose a group: "}),Object(j.jsx)("select",{id:"groupOptionsDropdown",onChange:this.groupSelected,children:this.htmlGroupOptions()})]}),Object(j.jsx)("hr",{}),Object(j.jsx)(I,{group_name:this.props.location.state.group_name,members:this.props.location.state.members,singavg:this.props.location.state.singavg,rapavg:this.props.location.state.rapavg,danceavg:this.props.location.state.danceavg,selected_group:this.state.selected_group})]})}}]),n}(a.a.Component),B=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).parseToday=function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();e=t+"/"+n+"/"+a,s.setState({today:e})},s.fetchVideo=function(){var e=s.props.location.state.selected_group,t=s.props.location.state.selected_track;localStorage.getItem(e+t)?(console.log("Video id retrieved from local storage"),s.setState({video_id:localStorage.getItem(e+t)})):(console.log("Attempt to get video id for",e,t),fetch("/api/video/"+e+"/"+t).then((function(e){return e.json()})).then((function(n){console.log("data",n),n.video_id&&(s.setState({video_id:n.video_id}),localStorage.setItem(e+t,n.video_id))})))},s.fetchScore=function(){var e={track_id:s.props.location.state.track_id,singavg:s.props.location.state.singavg,rapavg:s.props.location.state.rapavg,danceavg:s.props.location.state.danceavg};fetch("/api/performance",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.score&&s.setState({score:e.score})}))},s.printGroupMembers=function(){return s.props.location.state.members.map((function(e){return Object(j.jsx)("tr",{children:Object(j.jsxs)("td",{id:"resultsMember",children:[e.stage_name," ",e.group.includes("(Soloist)")?"(Soloist)":"from "+e.group]})},e.member_id)}))},s.countdown=function(){var e=setInterval((function(){s.setState({countdown:s.state.countdown-1})}),1e3);setTimeout((function(){clearInterval(e),document.getElementById("resultsTitle").style.display="block",document.getElementById("resultsText").style.display="flex",document.getElementById("leaderboardButton").style.display="block",document.getElementById("waitText").style.display="none"}),5e3)},s.addLeaderboard=function(){var e={username:s.props.location.state.username,score:s.state.score,group_name:s.props.location.state.group_name,group_members:s.props.location.state.members,song:s.props.location.state.selected_group+" \u2013 "+s.props.location.state.selected_track,video_id:s.state.video_id,date:s.state.today};fetch("/api/leaderboard/new",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e,"added to leaderboard"),alert("Your performance has been added to the leaderboard!"),window.location.replace("/leaderboard")}))},s.state={video_id:"",countdown:5,score:0,today:""},s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){sessionStorage.getItem("login")&&this.props.location.state||(alert('You must access this page from "My Group".'),window.location.replace("/")),this.parseToday(),document.getElementById("resultsTitle").style.display="none",document.getElementById("resultsText").style.display="none",document.getElementById("leaderboardButton").style.display="none",this.fetchVideo(),this.fetchScore(),this.countdown()}},{key:"render",value:function(){return Object(j.jsx)("div",{className:"Main",children:Object(j.jsxs)("div",{className:"results",children:[Object(j.jsx)("img",{className:"logoFull",src:p,height:"100px"}),Object(j.jsx)("iframe",{className:"ytplayer",id:"perfPlayer",type:"text/html",width:"720",height:"405",src:"https://www.youtube.com/embed/"+this.state.video_id+"?autoplay=1&modestbranding=1&color=white",frameBorder:"0",allowFullScreen:!0}),Object(j.jsxs)("div",{id:"resultsArea",children:[Object(j.jsxs)("h2",{id:"waitText",children:["Filming... ",Object(j.jsx)("br",{}),"[",this.state.countdown,"]"]}),Object(j.jsx)("h2",{id:"resultsTitle",children:"Great performance!"}),Object(j.jsx)("button",{id:"leaderboardButton",type:"button",onClick:this.addLeaderboard,children:"Add to leaderboard"}),Object(j.jsxs)("div",{id:"resultsText",children:[Object(j.jsx)("table",{id:"resultsTable",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Score"}),Object(j.jsx)("td",{children:this.state.score.toLocaleString()})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Song"}),Object(j.jsxs)("td",{children:[this.props.location.state.selected_group," \u2013 ",this.props.location.state.selected_track]})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Date"}),Object(j.jsx)("td",{children:this.state.today})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Username"}),Object(j.jsx)("td",{children:sessionStorage.getItem("login")})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Group"}),Object(j.jsx)("td",{children:this.props.location.state.group_name})]})]})}),Object(j.jsx)("table",{id:"resultsMembers",children:Object(j.jsxs)("tbody",{children:[Object(j.jsx)("tr",{children:Object(j.jsxs)("th",{children:["Members of ",this.props.location.state.group_name]})}),this.printGroupMembers()]})})]})]})]})})}}]),n}(a.a.Component),L=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).fetchLeaderboard=function(){fetch("/api/leaderboard").then((function(e){return e.json()})).then((function(e){console.log("data",e),e[0]&&(s.setState({entries:e,currently_playing:e[0].video_id}),localStorage.setItem("LBsong",e[0].video_id))}))},s.setInitialSong=function(){localStorage.getItem("LBsong")?s.setState({currently_playing:sessionStorage.getItem("LBSong")}):s.setState({currently_playing:"M3rg-rh6MPo"})},s.printEntries=function(){return s.state.entries.map((function(e,t){return Object(j.jsxs)("tr",{className:"LBRow",children:[Object(j.jsx)("td",{className:"LBNum",children:Object(j.jsx)("h1",{className:"LBNum",children:t+1})}),Object(j.jsx)("td",{className:"LBScore",children:e.score.toLocaleString()}),Object(j.jsx)("td",{className:"LBEntry",children:Object(j.jsx)(u.b,{title:"Visit profile",to:"/profile/"+e.username,children:e.username})}),Object(j.jsx)("td",{className:"LBEntry",children:e.group_name}),Object(j.jsx)("td",{className:"LBEntry",children:Object(j.jsx)("div",{className:"LBMembers",children:s.printMembers(e.group_members)})}),Object(j.jsx)("td",{className:"LBEntry",children:Object(j.jsx)("span",{className:"slink",title:"Play song",onClick:s.changeCurrentSong.bind(Object(w.a)(s),e.video_id),children:e.song})}),Object(j.jsx)("td",{className:"LBDate",children:e.date})]},e._id)}))},s.printMembers=function(e){return e.map((function(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(u.b,{to:"/groups/"+e.group+"/members/"+e.stage_name,children:e.stage_name}),Object(j.jsx)("br",{})]})}))},s.changeCurrentSong=function(e){s.setState({currently_playing:e})},s.state={entries:[],currently_playing:""},s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setInitialSong(),this.fetchLeaderboard()}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"Main",children:[Object(j.jsx)("img",{className:"logoFull",src:p,height:"100px"}),Object(j.jsx)("iframe",{className:"ytplayer",id:"LBytplayer",type:"text/html",width:"720",height:"405",src:"https://www.youtube.com/embed/"+this.state.currently_playing+"?autoplay=1&modestbranding=1&color=white",frameBorder:"0",allowFullScreen:!0}),Object(j.jsx)("div",{className:"LBDiv",children:Object(j.jsxs)("table",{className:"LBTable",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{className:"LBRowHeader",children:[Object(j.jsx)("th",{className:"LBHeader1"}),Object(j.jsx)("th",{className:"LBHeader",children:"Score"}),Object(j.jsx)("th",{className:"LBHeader",children:"User"}),Object(j.jsx)("th",{className:"LBHeader",children:"Group"}),Object(j.jsx)("th",{className:"LBHeader",children:"Members"}),Object(j.jsx)("th",{className:"LBHeader",children:"Song"}),Object(j.jsx)("th",{className:"LBHeader2",children:"Date"})]})}),Object(j.jsx)("tbody",{children:this.printEntries()})]})})]})}}]),n}(a.a.Component),M=n(7),T=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"loggedIn",value:function(){return!!sessionStorage.getItem("login")}},{key:"render",value:function(){return Object(j.jsxs)("main",{children:[Object(j.jsx)(h,{}),Object(j.jsxs)(M.d,{children:[Object(j.jsx)(M.b,{exact:!0,path:"/",children:Object(j.jsx)(M.a,{to:"/home"})}),Object(j.jsx)(M.b,{path:"/home",component:b,exact:!0}),Object(j.jsx)(M.b,{path:"/login",component:g,exact:!0}),Object(j.jsx)(M.b,{path:"/register",component:O,exact:!0}),Object(j.jsx)(M.b,{exact:!0,path:"/profile",children:this.loggedIn()?Object(j.jsx)(M.a,{to:"/profile/"+sessionStorage.getItem("login")}):Object(j.jsx)(M.a,{to:"/login"})}),Object(j.jsx)(M.b,{exact:!0,path:"/mygroup",children:this.loggedIn()?Object(j.jsx)(M.a,{to:"/"+sessionStorage.getItem("login")+"/mygroup"}):Object(j.jsx)(M.a,{to:"/login"})}),Object(j.jsx)(M.b,{path:"/profile/:username",component:S,exact:!0}),Object(j.jsx)(M.b,{path:"/:username/mygroup",component:k,exact:!0}),Object(j.jsx)(M.b,{path:"/edit",component:_,exact:!0}),Object(j.jsx)(M.b,{path:"/groups/",component:v,exact:!0}),Object(j.jsx)(M.b,{path:"/groups/:group_name",component:f,exact:!0}),Object(j.jsx)(M.b,{path:"/groups/:group/members/:member",component:y,exact:!0}),Object(j.jsx)(M.b,{path:"/perform",component:C,exact:!0}),Object(j.jsx)(M.b,{path:"/perform/go",component:B,exact:!0}),Object(j.jsx)(M.b,{path:"/leaderboard",component:L,exact:!0})]})]})}}]),n}(a.a.Component);r.a.render(Object(j.jsx)(u.a,{children:Object(j.jsx)(T,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.6d6ae4e1.chunk.js.map